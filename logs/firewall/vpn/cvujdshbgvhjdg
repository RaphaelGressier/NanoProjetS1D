Author: ghibaudo
Date: 2013-03-23 15:38:06 +0100 (Sat, 23 Mar 2013)
New Revision: 5092

Added:
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key
Log:
Ajout des nouvelles cles VPN

WARNING :  Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt	2013-03-23 14:38:06 UTC (rev 5092)
@@ -0,0 +1,66 @@
+Certificate:
+    Data:
+        Version: 3 (0x2)
+        Serial Number: 334 (0x14e)
+        Signature Algorithm: md5WithRSAEncryption
+        Issuer: C=fr, ST=Alpes Maritimes, L=Nice, O=OCA, OU=oca-n, CN=oca/emailAddress=sit-nice@oca.eu
+        Validity
+            Not Before: Mar 23 14:38:04 2013 GMT
+            Not After : Aug  5 14:38:04 2014 GMT
+        Subject: C=fr, ST=alpes maritimes, O=oca, OU=ocan, CN=test webvpn/emailAddress=test.webvpn@oca.eu
+        Subject Public Key Info:
+            Public Key Algorithm: rsaEncryption
+            RSA Public Key: (1024 bit)
+                Modulus (1024 bit):
+                    00:d0:f4:4b:bc:0b:a9:eb:a8:0a:c4:81:74:35:20:
+                    00:e3:32:9a:50:9f:5d:13:f2:75:65:54:86:94:6a:
+                    4e:a4:75:1c:58:a6:94:66:22:4e:11:b1:28:30:1d:
+                    6d:31:45:0f:e7:6f:6b:9b:a3:ea:d0:c0:48:f8:ee:
+                    07:95:51:fc:c9:fd:5a:23:05:c2:a0:39:b7:81:75:
+                    a4:08:97:fe:0e:44:48:30:c0:28:6a:1f:ed:9e:0e:
+                    4d:9c:4b:c8:8f:60:5d:fa:bd:88:77:f8:72:3e:ea:
+                    f6:d4:02:a1:62:dd:03:7e:a2:c1:3f:44:1d:b6:31:
+                    ea:0b:e6:2f:28:25:dc:15:4d
+                Exponent: 65537 (0x10001)
+        X509v3 extensions:
+            X509v3 Basic Constraints: 
+                CA:FALSE
+            Netscape Comment: 
+                Certificat genere par OpenSSL
+            X509v3 Subject Key Identifier: 
+                F8:C8:24:A8:6A:0D:94:2C:BB:29:6F:BF:3C:96:29:34:70:5C:96:68
+            X509v3 Authority Key Identifier: 
+                keyid:8E:F7:A3:D3:51:3A:01:50:3C:DA:80:67:A7:97:A6:FA:73:9E:EC:B0
+                DirName:/C=fr/ST=Alpes Maritimes/L=Nice/O=OCA/OU=oca-n/CN=oca/emailAddress=sit-nice@oca.eu
+                serial:00
+
+    Signature Algorithm: md5WithRSAEncryption
+        a6:64:15:23:ff:05:35:08:a5:33:b4:0f:63:3b:9a:ed:60:01:
+        3a:fa:10:63:8b:69:ea:75:89:0c:f5:95:d0:f1:e4:f5:cc:16:
+        78:fe:10:bf:82:92:c1:e9:ee:8b:22:cb:30:a8:56:bb:8a:e9:
+        3e:c4:a3:cb:ed:70:ac:0d:90:10:d2:d1:2a:19:31:90:88:16:
+        d9:3e:b3:14:d8:83:2e:06:5a:ce:bd:4d:3f:b9:80:76:0f:ff:
+        29:d8:3d:b2:7c:5f:45:6b:9f:17:c5:64:44:3c:99:2c:bd:fa:
+        b7:ec:3a:aa:20:4b:d7:ad:25:88:1f:33:37:e9:fa:bb:62:38:
+        2d:45
+-----BEGIN CERTIFICATE-----
+MIIDhzCCAvCgAwIBAgICAU4wDQYJKoZIhvcNAQEEBQAwgYIxCzAJBgNVBAYTAmZy
+MRgwFgYDVQQIEw9BbHBlcyBNYXJpdGltZXMxDTALBgNVBAcTBE5pY2UxDDAKBgNV
+BAoTA09DQTEOMAwGA1UECxMFb2NhLW4xDDAKBgNVBAMTA29jYTEeMBwGCSqGSIb3
+DQEJARYPc2l0LW5pY2VAb2NhLmV1MB4XDTEzMDMyMzE0MzgwNFoXDTE0MDgwNTE0
+MzgwNFowfTELMAkGA1UEBhMCZnIxGDAWBgNVBAgTD2FscGVzIG1hcml0aW1lczEM
+MAoGA1UEChMDb2NhMQ0wCwYDVQQLEwRvY2FuMRQwEgYDVQQDEwt0ZXN0IHdlYnZw
+bjEhMB8GCSqGSIb3DQEJARYSdGVzdC53ZWJ2cG5Ab2NhLmV1MIGfMA0GCSqGSIb3
+DQEBAQUAA4GNADCBiQKBgQDQ9Eu8C6nrqArEgXQ1IADjMppQn10T8nVlVIaUak6k
+dRxYppRmIk4RsSgwHW0xRQ/nb2ubo+rQwEj47geVUfzJ/VojBcKgObeBdaQIl/4O
+REgwwChqH+2eDk2cS8iPYF36vYh3+HI+6vbUAqFi3QN+osE/RB22MeoL5i8oJdwV
+TQIDAQABo4IBDjCCAQowCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdQ2VydGlm
+aWNhdCBnZW5lcmUgcGFyIE9wZW5TU0wwHQYDVR0OBBYEFPjIJKhqDZQsuylvvzyW
+KTRwXJZoMIGvBgNVHSMEgacwgaSAFI73o9NROgFQPNqAZ6eXpvpznuywoYGIpIGF
+MIGCMQswCQYDVQQGEwJmcjEYMBYGA1UECBMPQWxwZXMgTWFyaXRpbWVzMQ0wCwYD
+VQQHEwROaWNlMQwwCgYDVQQKEwNPQ0ExDjAMBgNVBAsTBW9jYS1uMQwwCgYDVQQD
+EwNvY2ExHjAcBgkqhkiG9w0BCQEWD3NpdC1uaWNlQG9jYS5ldYIBADANBgkqhkiG
+9w0BAQQFAAOBgQCmZBUj/wU1CKUztA9jO5rtYAE6+hBji2nqdYkM9ZXQ8eT1zBZ4
+/hC/gpLB6e6LIsswqFa7iuk+xKPL7XCsDZAQ0tEqGTGQiBbZPrMU2IMuBlrOvU0/
+uYB2D/8p2D2yfF9Fa58XxWREPJksvfq37DqqIEvXrSWIHzM36fq7YjgtRQ==
+-----END CERTIFICATE-----

WARNING : Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr	2013-03-23 14:38:06 UTC (rev 5092)
@@ -0,0 +1,12 @@
+-----BEGIN CERTIFICATE REQUEST-----
+MIIBzTCCATYCAQAwgYwxCzAJBgNVBAYTAmZyMRgwFgYDVQQIEw9hbHBlcyBtYXJp
+dGltZXMxDTALBgNVBAcTBG5pY2UxDDAKBgNVBAoTA29jYTENMAsGA1UECxMEb2Nh
+bjEUMBIGA1UEAxMLdGVzdCB3ZWJ2cG4xITAfBgkqhkiG9w0BCQEWEnRlc3Qud2Vi
+dnBuQG9jYS5ldTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA0PRLvAup66gK
+xIF0NSAA4zKaUJ9dE/J1ZVSGlGpOpHUcWKaUZiJOEbEoMB1tMUUP529rm6Pq0MBI
++O4HlVH8yf1aIwXCoDm3gXWkCJf+DkRIMMAoah/tng5NnEvIj2Bd+r2Id/hyPur2
+1AKhYt0DfqLBP0QdtjHqC+YvKCXcFU0CAwEAAaAAMA0GCSqGSIb3DQEBBQUAA4GB
+ADx148Q7I5xmudWobHX38GBwAwzD5Ttp5qLEGky5ZFObyQG3EENJQxv1H982zsP6
+zrBE/wMI1TcbEgXcTmqigO3IvGpYhtinrUm7HPNq+EQpjWUQjTqVMf4XPPknBq84
+1KJUKhJKZjD12GCBx6+OsbdX+EcXU7XflJvJz70sWS2t
+-----END CERTIFICATE REQUEST-----

WARNING : Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key	2013-03-23 14:38:06 UTC (rev 5092)
@@ -0,0 +1,15 @@
+-----BEGIN RSA PRIVATE KEY-----
+MIICXAIBAAKBgQDQ9Eu8C6nrqArEgXQ1IADjMppQn10T8nVlVIaUak6kdRxYppRm
+Ik4RsSgwHW0xRQ/nb2ubo+rQwEj47geVUfzJ/VojBcKgObeBdaQIl/4OREgwwChq
+H+2eDk2cS8iPYF36vYh3+HI+6vbUAqFi3QN+osE/RB22MeoL5i8oJdwVTQIDAQAB
+AoGAQwQHAjGPdtg3U9zdA2jXQAbrvS3PcWVSx4P7gcAypsY0qC4M7FDWTxBNflkB
+u0qWFjkC/zDsT7VL8iKNZhOciitGARp2ZYgYdSCfnWvY/neZ8XbVOu4eOjU1LMYB
+gttVEIKv/uK4o13srUtpJdYUqBZpqfhxhXsM4kTDYJxLvoECQQD2FMKiVsd2g3Ng
+WkBG64EIvyClU0k4rBdTnFjZDGMls7oYKlWi7H+dZTy+IWhl7sRzgAV19o+Zsqot
+5pVfcl6hAkEA2WBvRzUi/YTKN95rhygITHjWzZ5WBqDZ1iolEgbVopfjSAGJ9diw
+NK+AP1F5ZYx5QUurzb65mxkyd8XxsYuTLQJBAI3cl/voVSLQUvIn9UgtOfzl2hcU
+9XAzXVs5FctCpeG1Q8HsnePHvSXql+Lv9XRV+nCvS/aeRliPtCWz+UbF8yECQDuY
+C4nbEHeuYv4EFTidigDlFAaVBQKWMIJdVYJmq0UDHQVNnrPurwgSoTc6r+xeIZP8
+GeKzChFyS/q4IrXJDRUCQHKqwypEntaugO+uJnybvrM4H7ZknA6WE8Syk0OoIKia
+R7PvNx7adQ2UqE6Us9ezcl5ZiPldpjgwq+b6IJykzOk=
+-----END RSA PRIVATE KEY-----



Author: ghibaudo
Date: 2013-03-23 15:37:26 +0100 (Sat, 23 Mar 2013)
New Revision: 5091

Removed:
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key
Modified:
   reseaux/vpn/etc/openvpn/easy-rsa/keys/014D.pem
Log:
Suppression des acces VPN pour test_webvpn

WARNING : Modified: reseaux/vpn/etc/openvpn/easy-rsa/keys/014D.pem
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/014D.pem	2013-03-23 14:31:34 UTC (rev 5090)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/014D.pem	2013-03-23 14:37:26 UTC (rev 5091)
@@ -5,22 +5,22 @@
         Signature Algorithm: md5WithRSAEncryption
         Issuer: C=fr, ST=Alpes Maritimes, L=Nice, O=OCA, OU=oca-n, CN=oca/emailAddress=sit-nice@oca.eu
         Validity
-            Not Before: Dec 13 10:15:53 2012 GMT
-            Not After : Apr 27 10:15:53 2014 GMT
-        Subject: C=fr, ST=alpes maritimes, O=oca, OU=ocan, CN=Andre Ferrari/emailAddress=andre.ferrari@unice.fr
+            Not Before: Mar 23 14:31:32 2013 GMT
+            Not After : Aug  5 14:31:32 2014 GMT
+        Subject: C=fr, ST=alpes maritimes, O=oca, OU=ocan, CN=test webvpn/emailAddress=test.webvpn@oca.eu
         Subject Public Key Info:
             Public Key Algorithm: rsaEncryption
             RSA Public Key: (1024 bit)
                 Modulus (1024 bit):
-                    00:9b:95:5d:c7:04:1a:c6:86:1b:f7:28:b6:be:0b:
-                    df:b6:52:ee:9d:de:82:41:55:52:bb:a5:13:a1:4f:
-                    bb:3d:e1:8f:2f:29:4a:f9:94:92:29:bf:70:b5:53:
-                    9d:03:26:09:e1:08:89:8d:d2:f1:8a:6d:86:24:14:
-                    87:42:dc:c3:8e:a9:ad:ac:65:5d:d2:a8:86:13:70:
-                    28:0b:4c:25:99:6d:c2:0e:2d:f5:c5:2f:a1:2d:74:
-                    72:03:e0:ca:78:c5:54:a7:89:ee:82:ef:3e:ba:57:
-                    fa:fc:5a:c0:75:8b:07:9f:68:5e:50:28:b4:0f:62:
-                    96:a7:85:e4:c2:f7:fc:2c:5d
+                    00:bf:b4:d7:09:2f:8a:e4:c6:79:e0:88:8e:1d:37:
+                    7c:8f:59:18:e6:f1:9f:a3:5c:c0:7c:41:8c:01:d6:
+                    db:33:ef:9a:51:d0:35:12:bb:7c:b9:f5:d8:1b:fb:
+                    01:47:b8:b5:72:fe:1b:9d:f8:71:fd:06:48:c5:70:
+                    50:53:1b:c7:1c:2d:9e:b3:67:d4:bb:3f:ae:2c:06:
+                    5f:87:ed:0a:74:76:5f:49:d0:b8:62:98:72:7f:af:
+                    7e:96:d0:2b:5d:0b:c9:0e:f8:64:f6:56:1c:84:a2:
+                    49:f9:6b:6b:e1:79:ed:47:52:f0:c6:56:6c:a8:ce:
+                    7a:35:37:92:32:50:fb:09:93
                 Exponent: 65537 (0x10001)
         X509v3 extensions:
             X509v3 Basic Constraints: 
@@ -28,40 +28,39 @@
             Netscape Comment: 
                 Certificat genere par OpenSSL
             X509v3 Subject Key Identifier: 
-                5B:70:B1:68:82:68:A0:50:DD:5E:6E:A4:B4:5E:64:BA:DA:29:29:E5
+                76:67:13:E0:D5:76:D2:38:20:CD:9B:2B:83:66:86:EC:77:29:CB:76
             X509v3 Authority Key Identifier: 
                 keyid:8E:F7:A3:D3:51:3A:01:50:3C:DA:80:67:A7:97:A6:FA:73:9E:EC:B0
                 DirName:/C=fr/ST=Alpes Maritimes/L=Nice/O=OCA/OU=oca-n/CN=oca/emailAddress=sit-nice@oca.eu
                 serial:00
 
     Signature Algorithm: md5WithRSAEncryption
-        81:cd:c3:95:46:8f:5b:1a:80:c4:dd:74:8f:4a:a7:a3:66:09:
-        35:96:0b:05:f0:c5:bb:fe:2f:c6:c9:3d:4a:1a:9d:77:37:06:
-        b3:2b:e3:9f:25:3f:fe:7e:a6:57:e8:bc:50:f7:00:35:dc:42:
-        23:c7:76:2c:f0:86:72:2a:a3:ee:aa:03:45:a2:dc:57:98:0a:
-        76:86:9c:ed:dd:41:da:db:95:d9:52:aa:10:7a:22:b7:64:db:
-        1a:12:a0:41:0d:bf:a7:85:68:64:ae:82:0a:49:7c:35:f3:eb:
-        98:d2:92:28:2c:23:d1:cc:ce:bc:81:ca:ec:30:a8:f3:b0:f9:
-        b4:5d
+        70:65:b5:f9:d0:44:ad:3d:d2:82:24:df:1d:79:f8:7b:5d:e6:
+        27:71:cd:5f:fd:ed:fa:33:14:18:04:ae:e9:a8:db:7f:2c:5b:
+        68:ff:83:63:94:dd:3d:48:3f:0f:ec:0c:dc:a5:8e:bb:34:a8:
+        a4:c9:8c:1c:d8:f9:72:82:e5:43:94:4f:4c:7a:5a:b3:de:ad:
+        c6:b1:8b:c7:01:0e:28:3a:ca:dd:a4:73:21:6b:2c:bf:5e:e0:
+        e4:89:d2:ae:54:d4:79:42:cf:24:55:9d:69:da:ec:90:74:34:
+        6e:1c:09:f9:b6:31:74:85:96:02:79:e0:bc:c2:cc:9f:04:e8:
+        21:b5
 -----BEGIN CERTIFICATE-----
-MIIDjjCCAvegAwIBAgICAU0wDQYJKoZIhvcNAQEEBQAwgYIxCzAJBgNVBAYTAmZy
+MIIDhzCCAvCgAwIBAgICAU0wDQYJKoZIhvcNAQEEBQAwgYIxCzAJBgNVBAYTAmZy
 MRgwFgYDVQQIEw9BbHBlcyBNYXJpdGltZXMxDTALBgNVBAcTBE5pY2UxDDAKBgNV
 BAoTA09DQTEOMAwGA1UECxMFb2NhLW4xDDAKBgNVBAMTA29jYTEeMBwGCSqGSIb3
-DQEJARYPc2l0LW5pY2VAb2NhLmV1MB4XDTEyMTIxMzEwMTU1M1oXDTE0MDQyNzEw
-MTU1M1owgYMxCzAJBgNVBAYTAmZyMRgwFgYDVQQIEw9hbHBlcyBtYXJpdGltZXMx
-DDAKBgNVBAoTA29jYTENMAsGA1UECxMEb2NhbjEWMBQGA1UEAxMNQW5kcmUgRmVy
-cmFyaTElMCMGCSqGSIb3DQEJARYWYW5kcmUuZmVycmFyaUB1bmljZS5mcjCBnzAN
-BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAm5VdxwQaxoYb9yi2vgvftlLund6CQVVS
-u6UToU+7PeGPLylK+ZSSKb9wtVOdAyYJ4QiJjdLxim2GJBSHQtzDjqmtrGVd0qiG
-E3AoC0wlmW3CDi31xS+hLXRyA+DKeMVUp4nugu8+ulf6/FrAdYsHn2heUCi0D2KW
-p4Xkwvf8LF0CAwEAAaOCAQ4wggEKMAkGA1UdEwQCMAAwLAYJYIZIAYb4QgENBB8W
-HUNlcnRpZmljYXQgZ2VuZXJlIHBhciBPcGVuU1NMMB0GA1UdDgQWBBRbcLFogmig
-UN1ebqS0XmS62ikp5TCBrwYDVR0jBIGnMIGkgBSO96PTUToBUDzagGenl6b6c57s
-sKGBiKSBhTCBgjELMAkGA1UEBhMCZnIxGDAWBgNVBAgTD0FscGVzIE1hcml0aW1l
-czENMAsGA1UEBxMETmljZTEMMAoGA1UEChMDT0NBMQ4wDAYDVQQLEwVvY2EtbjEM
-MAoGA1UEAxMDb2NhMR4wHAYJKoZIhvcNAQkBFg9zaXQtbmljZUBvY2EuZXWCAQAw
-DQYJKoZIhvcNAQEEBQADgYEAgc3DlUaPWxqAxN10j0qno2YJNZYLBfDFu/4vxsk9
-ShqddzcGsyvjnyU//n6mV+i8UPcANdxCI8d2LPCGciqj7qoDRaLcV5gKdoac7d1B
-2tuV2VKqEHoit2TbGhKgQQ2/p4VoZK6CCkl8NfPrmNKSKCwj0czOvIHK7DCo87D5
-tF0=
+DQEJARYPc2l0LW5pY2VAb2NhLmV1MB4XDTEzMDMyMzE0MzEzMloXDTE0MDgwNTE0
+MzEzMlowfTELMAkGA1UEBhMCZnIxGDAWBgNVBAgTD2FscGVzIG1hcml0aW1lczEM
+MAoGA1UEChMDb2NhMQ0wCwYDVQQLEwRvY2FuMRQwEgYDVQQDEwt0ZXN0IHdlYnZw
+bjEhMB8GCSqGSIb3DQEJARYSdGVzdC53ZWJ2cG5Ab2NhLmV1MIGfMA0GCSqGSIb3
+DQEBAQUAA4GNADCBiQKBgQC/tNcJL4rkxnngiI4dN3yPWRjm8Z+jXMB8QYwB1tsz
+75pR0DUSu3y59dgb+wFHuLVy/hud+HH9BkjFcFBTG8ccLZ6zZ9S7P64sBl+H7Qp0
+dl9J0LhimHJ/r36W0CtdC8kO+GT2VhyEokn5a2vhee1HUvDGVmyozno1N5IyUPsJ
+kwIDAQABo4IBDjCCAQowCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdQ2VydGlm
+aWNhdCBnZW5lcmUgcGFyIE9wZW5TU0wwHQYDVR0OBBYEFHZnE+DVdtI4IM2bK4Nm
+hux3Kct2MIGvBgNVHSMEgacwgaSAFI73o9NROgFQPNqAZ6eXpvpznuywoYGIpIGF
+MIGCMQswCQYDVQQGEwJmcjEYMBYGA1UECBMPQWxwZXMgTWFyaXRpbWVzMQ0wCwYD
+VQQHEwROaWNlMQwwCgYDVQQKEwNPQ0ExDjAMBgNVBAsTBW9jYS1uMQwwCgYDVQQD
+EwNvY2ExHjAcBgkqhkiG9w0BCQEWD3NpdC1uaWNlQG9jYS5ldYIBADANBgkqhkiG
+9w0BAQQFAAOBgQBwZbX50EStPdKCJN8defh7XeYncc1f/e36MxQYBK7pqNt/LFto
+/4NjlN09SD8P7AzcpY67NKikyYwc2PlyguVDlE9Melqz3q3GsYvHAQ4oOsrdpHMh
+ayy/XuDkidKuVNR5Qs8kVZ1p2uyQdDRuHAn5tjF0hZYCeeC8wsyfBOghtQ==
 -----END CERTIFICATE-----

ERROR : Deleted: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt	2013-03-23 14:31:34 UTC (rev 5090)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt	2013-03-23 14:37:26 UTC (rev 5091)
@@ -1,66 +0,0 @@
-Certificate:
-    Data:
-        Version: 3 (0x2)
-        Serial Number: 333 (0x14d)
-        Signature Algorithm: md5WithRSAEncryption
-        Issuer: C=fr, ST=Alpes Maritimes, L=Nice, O=OCA, OU=oca-n, CN=oca/emailAddress=sit-nice@oca.eu
-        Validity
-            Not Before: Mar 23 14:31:32 2013 GMT
-            Not After : Aug  5 14:31:32 2014 GMT
-        Subject: C=fr, ST=alpes maritimes, O=oca, OU=ocan, CN=test webvpn/emailAddress=test.webvpn@oca.eu
-        Subject Public Key Info:
-            Public Key Algorithm: rsaEncryption
-            RSA Public Key: (1024 bit)
-                Modulus (1024 bit):
-                    00:bf:b4:d7:09:2f:8a:e4:c6:79:e0:88:8e:1d:37:
-                    7c:8f:59:18:e6:f1:9f:a3:5c:c0:7c:41:8c:01:d6:
-                    db:33:ef:9a:51:d0:35:12:bb:7c:b9:f5:d8:1b:fb:
-                    01:47:b8:b5:72:fe:1b:9d:f8:71:fd:06:48:c5:70:
-                    50:53:1b:c7:1c:2d:9e:b3:67:d4:bb:3f:ae:2c:06:
-                    5f:87:ed:0a:74:76:5f:49:d0:b8:62:98:72:7f:af:
-                    7e:96:d0:2b:5d:0b:c9:0e:f8:64:f6:56:1c:84:a2:
-                    49:f9:6b:6b:e1:79:ed:47:52:f0:c6:56:6c:a8:ce:
-                    7a:35:37:92:32:50:fb:09:93
-                Exponent: 65537 (0x10001)
-        X509v3 extensions:
-            X509v3 Basic Constraints: 
-                CA:FALSE
-            Netscape Comment: 
-                Certificat genere par OpenSSL
-            X509v3 Subject Key Identifier: 
-                76:67:13:E0:D5:76:D2:38:20:CD:9B:2B:83:66:86:EC:77:29:CB:76
-            X509v3 Authority Key Identifier: 
-                keyid:8E:F7:A3:D3:51:3A:01:50:3C:DA:80:67:A7:97:A6:FA:73:9E:EC:B0
-                DirName:/C=fr/ST=Alpes Maritimes/L=Nice/O=OCA/OU=oca-n/CN=oca/emailAddress=sit-nice@oca.eu
-                serial:00
-
-    Signature Algorithm: md5WithRSAEncryption
-        70:65:b5:f9:d0:44:ad:3d:d2:82:24:df:1d:79:f8:7b:5d:e6:
-        27:71:cd:5f:fd:ed:fa:33:14:18:04:ae:e9:a8:db:7f:2c:5b:
-        68:ff:83:63:94:dd:3d:48:3f:0f:ec:0c:dc:a5:8e:bb:34:a8:
-        a4:c9:8c:1c:d8:f9:72:82:e5:43:94:4f:4c:7a:5a:b3:de:ad:
-        c6:b1:8b:c7:01:0e:28:3a:ca:dd:a4:73:21:6b:2c:bf:5e:e0:
-        e4:89:d2:ae:54:d4:79:42:cf:24:55:9d:69:da:ec:90:74:34:
-        6e:1c:09:f9:b6:31:74:85:96:02:79:e0:bc:c2:cc:9f:04:e8:
-        21:b5
------BEGIN CERTIFICATE-----
-MIIDhzCCAvCgAwIBAgICAU0wDQYJKoZIhvcNAQEEBQAwgYIxCzAJBgNVBAYTAmZy
-MRgwFgYDVQQIEw9BbHBlcyBNYXJpdGltZXMxDTALBgNVBAcTBE5pY2UxDDAKBgNV
-BAoTA09DQTEOMAwGA1UECxMFb2NhLW4xDDAKBgNVBAMTA29jYTEeMBwGCSqGSIb3
-DQEJARYPc2l0LW5pY2VAb2NhLmV1MB4XDTEzMDMyMzE0MzEzMloXDTE0MDgwNTE0
-MzEzMlowfTELMAkGA1UEBhMCZnIxGDAWBgNVBAgTD2FscGVzIG1hcml0aW1lczEM
-MAoGA1UEChMDb2NhMQ0wCwYDVQQLEwRvY2FuMRQwEgYDVQQDEwt0ZXN0IHdlYnZw
-bjEhMB8GCSqGSIb3DQEJARYSdGVzdC53ZWJ2cG5Ab2NhLmV1MIGfMA0GCSqGSIb3
-DQEBAQUAA4GNADCBiQKBgQC/tNcJL4rkxnngiI4dN3yPWRjm8Z+jXMB8QYwB1tsz
-75pR0DUSu3y59dgb+wFHuLVy/hud+HH9BkjFcFBTG8ccLZ6zZ9S7P64sBl+H7Qp0
-dl9J0LhimHJ/r36W0CtdC8kO+GT2VhyEokn5a2vhee1HUvDGVmyozno1N5IyUPsJ
-kwIDAQABo4IBDjCCAQowCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdQ2VydGlm
-aWNhdCBnZW5lcmUgcGFyIE9wZW5TU0wwHQYDVR0OBBYEFHZnE+DVdtI4IM2bK4Nm
-hux3Kct2MIGvBgNVHSMEgacwgaSAFI73o9NROgFQPNqAZ6eXpvpznuywoYGIpIGF
-MIGCMQswCQYDVQQGEwJmcjEYMBYGA1UECBMPQWxwZXMgTWFyaXRpbWVzMQ0wCwYD
-VQQHEwROaWNlMQwwCgYDVQQKEwNPQ0ExDjAMBgNVBAsTBW9jYS1uMQwwCgYDVQQD
-EwNvY2ExHjAcBgkqhkiG9w0BCQEWD3NpdC1uaWNlQG9jYS5ldYIBADANBgkqhkiG
-9w0BAQQFAAOBgQBwZbX50EStPdKCJN8defh7XeYncc1f/e36MxQYBK7pqNt/LFto
-/4NjlN09SD8P7AzcpY67NKikyYwc2PlyguVDlE9Melqz3q3GsYvHAQ4oOsrdpHMh
-ayy/XuDkidKuVNR5Qs8kVZ1p2uyQdDRuHAn5tjF0hZYCeeC8wsyfBOghtQ==
------END CERTIFICATE-----

ERROR : Deleted: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr	2013-03-23 14:31:34 UTC (rev 5090)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr	2013-03-23 14:37:26 UTC (rev 5091)
@@ -1,12 +0,0 @@
------BEGIN CERTIFICATE REQUEST-----
-MIIBzTCCATYCAQAwgYwxCzAJBgNVBAYTAmZyMRgwFgYDVQQIEw9hbHBlcyBtYXJp
-dGltZXMxDTALBgNVBAcTBG5pY2UxDDAKBgNVBAoTA29jYTENMAsGA1UECxMEb2Nh
-bjEUMBIGA1UEAxMLdGVzdCB3ZWJ2cG4xITAfBgkqhkiG9w0BCQEWEnRlc3Qud2Vi
-dnBuQG9jYS5ldTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAv7TXCS+K5MZ5
-4IiOHTd8j1kY5vGfo1zAfEGMAdbbM++aUdA1Ert8ufXYG/sBR7i1cv4bnfhx/QZI
-xXBQUxvHHC2es2fUuz+uLAZfh+0KdHZfSdC4Yphyf69+ltArXQvJDvhk9lYchKJJ
-+Wtr4XntR1LwxlZsqM56NTeSMlD7CZMCAwEAAaAAMA0GCSqGSIb3DQEBBQUAA4GB
-ABaPKLqGCYKTf0FFg1O6Gxv/rU36iPjURvt3M/Qir8DLGn7fp7OuvlskTDav07ed
-ALX8Phy6Iw0yM1F5v9dv84z2U/FFYjBpgvTs+pPGS05NV9H9THzjKBX1cXHVhXkW
-5TXobhx3eYcnNk0gzAbWHyouxFPysey9+Gz0n8erzOri
------END CERTIFICATE REQUEST-----

ERROR :Deleted: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key	2013-03-23 14:31:34 UTC (rev 5090)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key	2013-03-23 14:37:26 UTC (rev 5091)
@@ -1,15 +0,0 @@
------BEGIN RSA PRIVATE KEY-----
-MIICXAIBAAKBgQC/tNcJL4rkxnngiI4dN3yPWRjm8Z+jXMB8QYwB1tsz75pR0DUS
-u3y59dgb+wFHuLVy/hud+HH9BkjFcFBTG8ccLZ6zZ9S7P64sBl+H7Qp0dl9J0Lhi
-mHJ/r36W0CtdC8kO+GT2VhyEokn5a2vhee1HUvDGVmyozno1N5IyUPsJkwIDAQAB
-AoGAdBpG3YZQnStjJswtHZ68Lmjsfvm5EAwde2OLMpX4XeTv1jq92eF4sXsl7hQ/
-eztvkPw6p5qPFomWyxSxYRQCqo3HRdMhi01TC5e8N03zRE18HiHomneAm5EGRrTF
-mf/Q5IQQwx7kGlL4D+wS8KY3njFr4lYq4DeFjQu/4rKsKPECQQDyBhOJMRmajst8
-+4mVPd6IKRJqTV43WpO9f8vMHxkJYJoD5V2PGul/uWENxQ1XSxj9eb/kF3fljOra
-ZcfiOoGJAkEAysbnkDagaFFdIEq8Wo5WNtwiWQEM7lm/hXIcdsGNZ91OYqjeNkOp
-6T4kLYR8MN99iZXh+PcNqlvRRePb2WT3OwJAQ1glf3tGIJezT6e+dOSuUzz6ftHg
-cY6mpYg18SqGEPHsaUEdc4CNkJjIxMgcGjovTfjeyF0vY5R+lR7VK8IT4QJBALtT
-OtKYFGGqYIyXXh+OBIlTnYt5k/eRA4QE4dS3g6li4an09KtOoOWvGX7POGdx3yg+
-RW5Y1M//WHnnQM85HccCQGWk53FH1ICIUhYwAFUTC/hGxqv71E91TzQXEdhTJHH9
-mKWXcEEH+t2krxiQjFyp4rUV2Q0+0xd1dL4QumeJ4cU=
------END RSA PRIVATE KEY-----



Author: ghibaudo
Date: 2013-03-23 15:31:34 +0100 (Sat, 23 Mar 2013)
New Revision: 5090

Added:
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key
Log:
Ajout des nouvelles cles VPN

WARNING : Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt	2013-03-23 14:31:34 UTC (rev 5090)
@@ -0,0 +1,66 @@
+Certificate:
+    Data:
+        Version: 3 (0x2)
+        Serial Number: 333 (0x14d)
+        Signature Algorithm: md5WithRSAEncryption
+        Issuer: C=fr, ST=Alpes Maritimes, L=Nice, O=OCA, OU=oca-n, CN=oca/emailAddress=sit-nice@oca.eu
+        Validity
+            Not Before: Mar 23 14:31:32 2013 GMT
+            Not After : Aug  5 14:31:32 2014 GMT
+        Subject: C=fr, ST=alpes maritimes, O=oca, OU=ocan, CN=test webvpn/emailAddress=test.webvpn@oca.eu
+        Subject Public Key Info:
+            Public Key Algorithm: rsaEncryption
+            RSA Public Key: (1024 bit)
+                Modulus (1024 bit):
+                    00:bf:b4:d7:09:2f:8a:e4:c6:79:e0:88:8e:1d:37:
+                    7c:8f:59:18:e6:f1:9f:a3:5c:c0:7c:41:8c:01:d6:
+                    db:33:ef:9a:51:d0:35:12:bb:7c:b9:f5:d8:1b:fb:
+                    01:47:b8:b5:72:fe:1b:9d:f8:71:fd:06:48:c5:70:
+                    50:53:1b:c7:1c:2d:9e:b3:67:d4:bb:3f:ae:2c:06:
+                    5f:87:ed:0a:74:76:5f:49:d0:b8:62:98:72:7f:af:
+                    7e:96:d0:2b:5d:0b:c9:0e:f8:64:f6:56:1c:84:a2:
+                    49:f9:6b:6b:e1:79:ed:47:52:f0:c6:56:6c:a8:ce:
+                    7a:35:37:92:32:50:fb:09:93
+                Exponent: 65537 (0x10001)
+        X509v3 extensions:
+            X509v3 Basic Constraints: 
+                CA:FALSE
+            Netscape Comment: 
+                Certificat genere par OpenSSL
+            X509v3 Subject Key Identifier: 
+                76:67:13:E0:D5:76:D2:38:20:CD:9B:2B:83:66:86:EC:77:29:CB:76
+            X509v3 Authority Key Identifier: 
+                keyid:8E:F7:A3:D3:51:3A:01:50:3C:DA:80:67:A7:97:A6:FA:73:9E:EC:B0
+                DirName:/C=fr/ST=Alpes Maritimes/L=Nice/O=OCA/OU=oca-n/CN=oca/emailAddress=sit-nice@oca.eu
+                serial:00
+
+    Signature Algorithm: md5WithRSAEncryption
+        70:65:b5:f9:d0:44:ad:3d:d2:82:24:df:1d:79:f8:7b:5d:e6:
+        27:71:cd:5f:fd:ed:fa:33:14:18:04:ae:e9:a8:db:7f:2c:5b:
+        68:ff:83:63:94:dd:3d:48:3f:0f:ec:0c:dc:a5:8e:bb:34:a8:
+        a4:c9:8c:1c:d8:f9:72:82:e5:43:94:4f:4c:7a:5a:b3:de:ad:
+        c6:b1:8b:c7:01:0e:28:3a:ca:dd:a4:73:21:6b:2c:bf:5e:e0:
+        e4:89:d2:ae:54:d4:79:42:cf:24:55:9d:69:da:ec:90:74:34:
+        6e:1c:09:f9:b6:31:74:85:96:02:79:e0:bc:c2:cc:9f:04:e8:
+        21:b5
+-----BEGIN CERTIFICATE-----
+MIIDhzCCAvCgAwIBAgICAU0wDQYJKoZIhvcNAQEEBQAwgYIxCzAJBgNVBAYTAmZy
+MRgwFgYDVQQIEw9BbHBlcyBNYXJpdGltZXMxDTALBgNVBAcTBE5pY2UxDDAKBgNV
+BAoTA09DQTEOMAwGA1UECxMFb2NhLW4xDDAKBgNVBAMTA29jYTEeMBwGCSqGSIb3
+DQEJARYPc2l0LW5pY2VAb2NhLmV1MB4XDTEzMDMyMzE0MzEzMloXDTE0MDgwNTE0
+MzEzMlowfTELMAkGA1UEBhMCZnIxGDAWBgNVBAgTD2FscGVzIG1hcml0aW1lczEM
+MAoGA1UEChMDb2NhMQ0wCwYDVQQLEwRvY2FuMRQwEgYDVQQDEwt0ZXN0IHdlYnZw
+bjEhMB8GCSqGSIb3DQEJARYSdGVzdC53ZWJ2cG5Ab2NhLmV1MIGfMA0GCSqGSIb3
+DQEBAQUAA4GNADCBiQKBgQC/tNcJL4rkxnngiI4dN3yPWRjm8Z+jXMB8QYwB1tsz
+75pR0DUSu3y59dgb+wFHuLVy/hud+HH9BkjFcFBTG8ccLZ6zZ9S7P64sBl+H7Qp0
+dl9J0LhimHJ/r36W0CtdC8kO+GT2VhyEokn5a2vhee1HUvDGVmyozno1N5IyUPsJ
+kwIDAQABo4IBDjCCAQowCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdQ2VydGlm
+aWNhdCBnZW5lcmUgcGFyIE9wZW5TU0wwHQYDVR0OBBYEFHZnE+DVdtI4IM2bK4Nm
+hux3Kct2MIGvBgNVHSMEgacwgaSAFI73o9NROgFQPNqAZ6eXpvpznuywoYGIpIGF
+MIGCMQswCQYDVQQGEwJmcjEYMBYGA1UECBMPQWxwZXMgTWFyaXRpbWVzMQ0wCwYD
+VQQHEwROaWNlMQwwCgYDVQQKEwNPQ0ExDjAMBgNVBAsTBW9jYS1uMQwwCgYDVQQD
+EwNvY2ExHjAcBgkqhkiG9w0BCQEWD3NpdC1uaWNlQG9jYS5ldYIBADANBgkqhkiG
+9w0BAQQFAAOBgQBwZbX50EStPdKCJN8defh7XeYncc1f/e36MxQYBK7pqNt/LFto
+/4NjlN09SD8P7AzcpY67NKikyYwc2PlyguVDlE9Melqz3q3GsYvHAQ4oOsrdpHMh
+ayy/XuDkidKuVNR5Qs8kVZ1p2uyQdDRuHAn5tjF0hZYCeeC8wsyfBOghtQ==
+-----END CERTIFICATE-----

WARNING : Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr	2013-03-23 14:31:34 UTC (rev 5090)
@@ -0,0 +1,12 @@
+-----BEGIN CERTIFICATE REQUEST-----
+MIIBzTCCATYCAQAwgYwxCzAJBgNVBAYTAmZyMRgwFgYDVQQIEw9hbHBlcyBtYXJp
+dGltZXMxDTALBgNVBAcTBG5pY2UxDDAKBgNVBAoTA29jYTENMAsGA1UECxMEb2Nh
+bjEUMBIGA1UEAxMLdGVzdCB3ZWJ2cG4xITAfBgkqhkiG9w0BCQEWEnRlc3Qud2Vi
+dnBuQG9jYS5ldTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAv7TXCS+K5MZ5
+4IiOHTd8j1kY5vGfo1zAfEGMAdbbM++aUdA1Ert8ufXYG/sBR7i1cv4bnfhx/QZI
+xXBQUxvHHC2es2fUuz+uLAZfh+0KdHZfSdC4Yphyf69+ltArXQvJDvhk9lYchKJJ
++Wtr4XntR1LwxlZsqM56NTeSMlD7CZMCAwEAAaAAMA0GCSqGSIb3DQEBBQUAA4GB
+ABaPKLqGCYKTf0FFg1O6Gxv/rU36iPjURvt3M/Qir8DLGn7fp7OuvlskTDav07ed
+ALX8Phy6Iw0yM1F5v9dv84z2U/FFYjBpgvTs+pPGS05NV9H9THzjKBX1cXHVhXkW
+5TXobhx3eYcnNk0gzAbWHyouxFPysey9+Gz0n8erzOri
+-----END CERTIFICATE REQUEST-----

WARNING : Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key	2013-03-23 14:31:34 UTC (rev 5090)
@@ -0,0 +1,15 @@
+-----BEGIN RSA PRIVATE KEY-----
+MIICXAIBAAKBgQC/tNcJL4rkxnngiI4dN3yPWRjm8Z+jXMB8QYwB1tsz75pR0DUS
+u3y59dgb+wFHuLVy/hud+HH9BkjFcFBTG8ccLZ6zZ9S7P64sBl+H7Qp0dl9J0Lhi
+mHJ/r36W0CtdC8kO+GT2VhyEokn5a2vhee1HUvDGVmyozno1N5IyUPsJkwIDAQAB
+AoGAdBpG3YZQnStjJswtHZ68Lmjsfvm5EAwde2OLMpX4XeTv1jq92eF4sXsl7hQ/
+eztvkPw6p5qPFomWyxSxYRQCqo3HRdMhi01TC5e8N03zRE18HiHomneAm5EGRrTF
+mf/Q5IQQwx7kGlL4D+wS8KY3njFr4lYq4DeFjQu/4rKsKPECQQDyBhOJMRmajst8
++4mVPd6IKRJqTV43WpO9f8vMHxkJYJoD5V2PGul/uWENxQ1XSxj9eb/kF3fljOra
+ZcfiOoGJAkEAysbnkDagaFFdIEq8Wo5WNtwiWQEM7lm/hXIcdsGNZ91OYqjeNkOp
+6T4kLYR8MN99iZXh+PcNqlvRRePb2WT3OwJAQ1glf3tGIJezT6e+dOSuUzz6ftHg
+cY6mpYg18SqGEPHsaUEdc4CNkJjIxMgcGjovTfjeyF0vY5R+lR7VK8IT4QJBALtT
+OtKYFGGqYIyXXh+OBIlTnYt5k/eRA4QE4dS3g6li4an09KtOoOWvGX7POGdx3yg+
+RW5Y1M//WHnnQM85HccCQGWk53FH1ICIUhYwAFUTC/hGxqv71E91TzQXEdhTJHH9
+mKWXcEEH+t2krxiQjFyp4rUV2Q0+0xd1dL4QumeJ4cU=
+-----END RSA PRIVATE KEY-----



Author: ghibaudo
Date: 2013-03-23 15:31:34 +0100 (Sat, 23 Mar 2013)
New Revision: 5090

Added:
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr
   reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key
Log:
Ajout des nouvelles cles VPN

WARNING : Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.crt	2013-03-23 14:31:34 UTC (rev 5090)
@@ -0,0 +1,66 @@
+Certificate:
+    Data:
+        Version: 3 (0x2)
+        Serial Number: 333 (0x14d)
+        Signature Algorithm: md5WithRSAEncryption
+        Issuer: C=fr, ST=Alpes Maritimes, L=Nice, O=OCA, OU=oca-n, CN=oca/emailAddress=sit-nice@oca.eu
+        Validity
+            Not Before: Mar 23 14:31:32 2013 GMT
+            Not After : Aug  5 14:31:32 2014 GMT
+        Subject: C=fr, ST=alpes maritimes, O=oca, OU=ocan, CN=test webvpn/emailAddress=test.webvpn@oca.eu
+        Subject Public Key Info:
+            Public Key Algorithm: rsaEncryption
+            RSA Public Key: (1024 bit)
+                Modulus (1024 bit):
+                    00:bf:b4:d7:09:2f:8a:e4:c6:79:e0:88:8e:1d:37:
+                    7c:8f:59:18:e6:f1:9f:a3:5c:c0:7c:41:8c:01:d6:
+                    db:33:ef:9a:51:d0:35:12:bb:7c:b9:f5:d8:1b:fb:
+                    01:47:b8:b5:72:fe:1b:9d:f8:71:fd:06:48:c5:70:
+                    50:53:1b:c7:1c:2d:9e:b3:67:d4:bb:3f:ae:2c:06:
+                    5f:87:ed:0a:74:76:5f:49:d0:b8:62:98:72:7f:af:
+                    7e:96:d0:2b:5d:0b:c9:0e:f8:64:f6:56:1c:84:a2:
+                    49:f9:6b:6b:e1:79:ed:47:52:f0:c6:56:6c:a8:ce:
+                    7a:35:37:92:32:50:fb:09:93
+                Exponent: 65537 (0x10001)
+        X509v3 extensions:
+            X509v3 Basic Constraints: 
+                CA:FALSE
+            Netscape Comment: 
+                Certificat genere par OpenSSL
+            X509v3 Subject Key Identifier: 
+                76:67:13:E0:D5:76:D2:38:20:CD:9B:2B:83:66:86:EC:77:29:CB:76
+            X509v3 Authority Key Identifier: 
+                keyid:8E:F7:A3:D3:51:3A:01:50:3C:DA:80:67:A7:97:A6:FA:73:9E:EC:B0
+                DirName:/C=fr/ST=Alpes Maritimes/L=Nice/O=OCA/OU=oca-n/CN=oca/emailAddress=sit-nice@oca.eu
+                serial:00
+
+    Signature Algorithm: md5WithRSAEncryption
+        70:65:b5:f9:d0:44:ad:3d:d2:82:24:df:1d:79:f8:7b:5d:e6:
+        27:71:cd:5f:fd:ed:fa:33:14:18:04:ae:e9:a8:db:7f:2c:5b:
+        68:ff:83:63:94:dd:3d:48:3f:0f:ec:0c:dc:a5:8e:bb:34:a8:
+        a4:c9:8c:1c:d8:f9:72:82:e5:43:94:4f:4c:7a:5a:b3:de:ad:
+        c6:b1:8b:c7:01:0e:28:3a:ca:dd:a4:73:21:6b:2c:bf:5e:e0:
+        e4:89:d2:ae:54:d4:79:42:cf:24:55:9d:69:da:ec:90:74:34:
+        6e:1c:09:f9:b6:31:74:85:96:02:79:e0:bc:c2:cc:9f:04:e8:
+        21:b5
+-----BEGIN CERTIFICATE-----
+MIIDhzCCAvCgAwIBAgICAU0wDQYJKoZIhvcNAQEEBQAwgYIxCzAJBgNVBAYTAmZy
+MRgwFgYDVQQIEw9BbHBlcyBNYXJpdGltZXMxDTALBgNVBAcTBE5pY2UxDDAKBgNV
+BAoTA09DQTEOMAwGA1UECxMFb2NhLW4xDDAKBgNVBAMTA29jYTEeMBwGCSqGSIb3
+DQEJARYPc2l0LW5pY2VAb2NhLmV1MB4XDTEzMDMyMzE0MzEzMloXDTE0MDgwNTE0
+MzEzMlowfTELMAkGA1UEBhMCZnIxGDAWBgNVBAgTD2FscGVzIG1hcml0aW1lczEM
+MAoGA1UEChMDb2NhMQ0wCwYDVQQLEwRvY2FuMRQwEgYDVQQDEwt0ZXN0IHdlYnZw
+bjEhMB8GCSqGSIb3DQEJARYSdGVzdC53ZWJ2cG5Ab2NhLmV1MIGfMA0GCSqGSIb3
+DQEBAQUAA4GNADCBiQKBgQC/tNcJL4rkxnngiI4dN3yPWRjm8Z+jXMB8QYwB1tsz
+75pR0DUSu3y59dgb+wFHuLVy/hud+HH9BkjFcFBTG8ccLZ6zZ9S7P64sBl+H7Qp0
+dl9J0LhimHJ/r36W0CtdC8kO+GT2VhyEokn5a2vhee1HUvDGVmyozno1N5IyUPsJ
+kwIDAQABo4IBDjCCAQowCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdQ2VydGlm
+aWNhdCBnZW5lcmUgcGFyIE9wZW5TU0wwHQYDVR0OBBYEFHZnE+DVdtI4IM2bK4Nm
+hux3Kct2MIGvBgNVHSMEgacwgaSAFI73o9NROgFQPNqAZ6eXpvpznuywoYGIpIGF
+MIGCMQswCQYDVQQGEwJmcjEYMBYGA1UECBMPQWxwZXMgTWFyaXRpbWVzMQ0wCwYD
+VQQHEwROaWNlMQwwCgYDVQQKEwNPQ0ExDjAMBgNVBAsTBW9jYS1uMQwwCgYDVQQD
+EwNvY2ExHjAcBgkqhkiG9w0BCQEWD3NpdC1uaWNlQG9jYS5ldYIBADANBgkqhkiG
+9w0BAQQFAAOBgQBwZbX50EStPdKCJN8defh7XeYncc1f/e36MxQYBK7pqNt/LFto
+/4NjlN09SD8P7AzcpY67NKikyYwc2PlyguVDlE9Melqz3q3GsYvHAQ4oOsrdpHMh
+ayy/XuDkidKuVNR5Qs8kVZ1p2uyQdDRuHAn5tjF0hZYCeeC8wsyfBOghtQ==
+-----END CERTIFICATE-----

WARNING : Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.csr	2013-03-23 14:31:34 UTC (rev 5090)
@@ -0,0 +1,12 @@
+-----BEGIN CERTIFICATE REQUEST-----
+MIIBzTCCATYCAQAwgYwxCzAJBgNVBAYTAmZyMRgwFgYDVQQIEw9hbHBlcyBtYXJp
+dGltZXMxDTALBgNVBAcTBG5pY2UxDDAKBgNVBAoTA29jYTENMAsGA1UECxMEb2Nh
+bjEUMBIGA1UEAxMLdGVzdCB3ZWJ2cG4xITAfBgkqhkiG9w0BCQEWEnRlc3Qud2Vi
+dnBuQG9jYS5ldTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAv7TXCS+K5MZ5
+4IiOHTd8j1kY5vGfo1zAfEGMAdbbM++aUdA1Ert8ufXYG/sBR7i1cv4bnfhx/QZI
+xXBQUxvHHC2es2fUuz+uLAZfh+0KdHZfSdC4Yphyf69+ltArXQvJDvhk9lYchKJJ
++Wtr4XntR1LwxlZsqM56NTeSMlD7CZMCAwEAAaAAMA0GCSqGSIb3DQEBBQUAA4GB
+ABaPKLqGCYKTf0FFg1O6Gxv/rU36iPjURvt3M/Qir8DLGn7fp7OuvlskTDav07ed
+ALX8Phy6Iw0yM1F5v9dv84z2U/FFYjBpgvTs+pPGS05NV9H9THzjKBX1cXHVhXkW
+5TXobhx3eYcnNk0gzAbWHyouxFPysey9+Gz0n8erzOri
+-----END CERTIFICATE REQUEST-----

WARNING : Added: reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key
===================================================================
--- reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key	                        (rev 0)
+++ reseaux/vpn/etc/openvpn/easy-rsa/keys/testwebvpn.key	2013-03-23 14:31:34 UTC (rev 5090)
@@ -0,0 +1,15 @@
+-----BEGIN RSA PRIVATE KEY-----
+MIICXAIBAAKBgQC/tNcJL4rkxnngiI4dN3yPWRjm8Z+jXMB8QYwB1tsz75pR0DUS
+u3y59dgb+wFHuLVy/hud+HH9BkjFcFBTG8ccLZ6zZ9S7P64sBl+H7Qp0dl9J0Lhi
+mHJ/r36W0CtdC8kO+GT2VhyEokn5a2vhee1HUvDGVmyozno1N5IyUPsJkwIDAQAB
+AoGAdBpG3YZQnStjJswtHZ68Lmjsfvm5EAwde2OLMpX4XeTv1jq92eF4sXsl7hQ/
+eztvkPw6p5qPFomWyxSxYRQCqo3HRdMhi01TC5e8N03zRE18HiHomneAm5EGRrTF
+mf/Q5IQQwx7kGlL4D+wS8KY3njFr4lYq4DeFjQu/4rKsKPECQQDyBhOJMRmajst8
++4mVPd6IKRJqTV43WpO9f8vMHxkJYJoD5V2PGul/uWENxQ1XSxj9eb/kF3fljOra
+ZcfiOoGJAkEAysbnkDagaFFdIEq8Wo5WNtwiWQEM7lm/hXIcdsGNZ91OYqjeNkOp
+6T4kLYR8MN99iZXh+PcNqlvRRePb2WT3OwJAQ1glf3tGIJezT6e+dOSuUzz6ftHg
+cY6mpYg18SqGEPHsaUEdc4CNkJjIxMgcGjovTfjeyF0vY5R+lR7VK8IT4QJBALtT
+OtKYFGGqYIyXXh+OBIlTnYt5k/eRA4QE4dS3g6li4an09KtOoOWvGX7POGdx3yg+
+RW5Y1M//WHnnQM85HccCQGWk53FH1ICIUhYwAFUTC/hGxqv71E91TzQXEdhTJHH9
+mKWXcEEH+t2krxiQjFyp4rUV2Q0+0xd1dL4QumeJ4cU=
+-----END RSA PRIVATE KEY-----




Author: ghibaudo
Date: 2013-03-23 15:15:52 +0100 (Sat, 23 Mar 2013)
New Revision: 5089

Added:
   reseaux/vpn/var/www/html/openvpn/certificats/delete.php
Modified:
   reseaux/vpn/var/www/html/openvpn/certificats/certificats.html
   reseaux/vpn/var/www/html/openvpn/certificats/certs/certclient.php
   reseaux/vpn/var/www/html/openvpn/certificats/certs/certifs
   reseaux/vpn/var/www/html/openvpn/certificats/certs/expect_script
   reseaux/vpn/var/www/html/openvpn/certificats/certs/index.txt
   reseaux/vpn/var/www/html/openvpn/certificats/certs/index.txt.old
   reseaux/vpn/var/www/html/openvpn/certificats/certs/openssl.cnf
   reseaux/vpn/var/www/html/openvpn/certificats/certs/serial
   reseaux/vpn/var/www/html/openvpn/certificats/certs/serial.old
   reseaux/vpn/var/www/html/openvpn/certificats/certsearch.php
   reseaux/vpn/var/www/html/openvpn/config/firewall.php
   reseaux/vpn/var/www/html/openvpn/config/firewall_functions.php
Log:
Ajout fonctions suppression utilisateurs


WARNING : Modified: reseaux/vpn/var/www/html/openvpn/certificats/certificats.html
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certificats.html	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certificats.html	2013-03-23 14:15:52 UTC (rev 5089)
@@ -18,6 +18,8 @@
 <br>
 <a href="certclient.html">.: Cr&eacute;er un certificat client</a>
 <br>
+<a href="delete.php">.: Supprimer un certificat client</a>
+<br>
 <a href="dh.html">.: Cr&eacute;er une clef DH</a>
 <br>
 <a href="share.html">.: Cr&eacute;er une clef partagee</a>

WARNING : Modified: reseaux/vpn/var/www/html/openvpn/certificats/certs/certclient.php
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certs/certclient.php	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certs/certclient.php	2013-03-23 14:15:52 UTC (rev 5089)
@@ -393,6 +393,12 @@
         system("sudo mv $filename.key ../recup");
         echo "<br>le d&eacute;placement des fichiers s'est termin&eacute; avec succ&egrave;s<br>"; 
 
+        system("sudo svn add /etc/openvpn/easy-rsa/keys/$filename.crt");
+        system("sudo svn add /etc/openvpn/easy-rsa/keys/$filename.csr");
+        system("sudo svn add /etc/openvpn/easy-rsa/keys/$filename.key");
+        system("sudo svn commit /usr/local/svn/vpn/etc/openvpn/easy-rsa/keys/ -m 'Ajout des nouvelles cles VPN'");
+        echo "<br>SVN a pu effectuer ses actions<br>";
+
         if ($OS == "Windows") {
                 $openvpnconf = "client
                 dev tun
@@ -468,7 +474,7 @@
                 echo "<br><b> Fichier de configuration : </b>Pas de cr&eacute;ation de fichier de configuration pour Ubuntu</br>";
         }
 
-        $user = preg_replace('/ /', '/_/', $CN);
+        $user = preg_replace('/ /', '_', $CN);
         $UDPNetwork = getUDPNetwork($user);
         if (!$UDPNetwork) {
                 $newUDPNetwork = getFreeUDPNetwork();

WARNING : Modified: reseaux/vpn/var/www/html/openvpn/certificats/certs/certifs
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certs/certifs	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certs/certifs	2013-03-23 14:15:52 UTC (rev 5089)
@@ -5806,3 +5806,123 @@
 mot de passe: .
 compagnie: .
 
+
+0146
+nom du fichier: test.crt
+taille de cl&eacute;: 1024
+dur&eacute;e de validit&eacute;: 500 jours
+pays: fr
+province: alpes maritimes
+ville: nice
+organisation: oca
+unit&eacute; d'organisation: ocan
+nom commun: test
+adresse e-mail: test@oca.eu
+mot de passe: .
+compagnie: .
+
+
+0147
+nom du fichier: testwebvpn.crt
+taille de cl&eacute;: 1024
+dur&eacute;e de validit&eacute;: 500 jours
+pays: fr
+province: alpes maritimes
+ville: nice
+organisation: oca
+unit&eacute; d'organisation: ocan
+nom commun: test webvpn
+adresse e-mail: test.webvpn@oca.eu
+mot de passe: .
+compagnie: .
+
+
+0148
+nom du fichier: testwebvpn.crt
+taille de cl&eacute;: 1024
+dur&eacute;e de validit&eacute;: 500 jours
+pays: fr
+province: alpes maritimes
+ville: nice
+organisation: oca
+unit&eacute; d'organisation: ocan
+nom commun: test webvpn
+adresse e-mail: test.webvpn@oca.eu
+mot de passe: .
+compagnie: .
+
+
+0148
+nom du fichier: .crt
+taille de cl&eacute;: 
+dur&eacute;e de validit&eacute;:  jours
+pays: 
+province: 
+ville: 
+organisation: 
+unit&eacute; d'organisation: 
+nom commun: 
+adresse e-mail: 
+mot de passe: 
+compagnie: 
+
+
+0149
+nom du fichier: testwebvpn.crt
+taille de cl&eacute;: 1024
+dur&eacute;e de validit&eacute;: 500 jours
+pays: fr
+province: alpes maritimes
+ville: nice
+organisation: oca
+unit&eacute; d'organisation: ocan
+nom commun: test webvpn
+adresse e-mail: test.webvpn@oca.eu
+mot de passe: .
+compagnie: .
+
+
+014A
+nom du fichier: testwebvpn.crt
+taille de cl&eacute;: 1024
+dur&eacute;e de validit&eacute;: 500 jours
+pays: fr
+province: alpes maritimes
+ville: nice
+organisation: oca
+unit&eacute; d'organisation: ocan
+nom commun: test webvpn
+adresse e-mail: test.webvpn@oca.eu
+mot de passe: .
+compagnie: .
+
+
+014B
+nom du fichier: testwebvpn.crt
+taille de cl&eacute;: 1024
+dur&eacute;e de validit&eacute;: 500 jours
+pays: fr
+province: alpes maritimes
+ville: nice
+organisation: oca
+unit&eacute; d'organisation: ocan
+nom commun: test webvpn
+adresse e-mail: test.webvpn@oca.eu
+mot de passe: .
+compagnie: .
+
+
+014C
+nom du fichier: testwebvpn.crt
+taille de cl&eacute;: 1024
+dur&eacute;e de validit&eacute;: 500 jours
+pays: fr
+province: alpes maritimes
+ville: nice
+organisation: oca
+unit&eacute; d'organisation: ocan
+nom commun: test webvpn
+adresse e-mail: test.webvpn@oca.eu
+mot de passe: .
+compagnie: .
+

ERROR :Modified: reseaux/vpn/var/www/html/openvpn/certificats/certs/expect_script
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certs/expect_script	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certs/expect_script	2013-03-23 14:15:52 UTC (rev 5089)
@@ -1,6 +1,6 @@
 #!/usr/bin/expect -f
 
-        spawn openssl req -nodes -new -keyout test.key -out test.csr -config openssl.cnf
+        spawn openssl req -nodes -new -keyout testwebvpn.key -out testwebvpn.csr -config openssl.cnf
         expect " pays"
         send -- "fr\r"
         expect " province"
@@ -12,9 +12,9 @@
         expect " unite"
         send -- "ocan\r"
         expect " commun"
-        send -- "test\r"
+        send -- "test webvpn\r"
         expect " e mail"
-        send -- "test@oca.eu\r"
+        send -- "test.webvpn@oca.eu\r"
         expect " passe"
         send -- ".\r"
         expect " optio"

ERROR : Modified: reseaux/vpn/var/www/html/openvpn/certificats/certs/index.txt
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certs/index.txt	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certs/index.txt	2013-03-23 14:15:52 UTC (rev 5089)
@@ -323,3 +323,10 @@
 V	140805023531Z		0143	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
 V	140805023748Z		0144	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
 V	140805031458Z		0145	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
+V	140805130449Z		0146	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
+V	140805130620Z		0147	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805130815Z		0148	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805140452Z		0149	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805141133Z		014A	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805141222Z		014B	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805141424Z		014C	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu

WARNING : Modified: reseaux/vpn/var/www/html/openvpn/certificats/certs/index.txt.old
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certs/index.txt.old	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certs/index.txt.old	2013-03-23 14:15:52 UTC (rev 5089)
@@ -322,3 +322,10 @@
 V	140805021327Z		0142	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
 V	140805023531Z		0143	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
 V	140805023748Z		0144	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
+V	140805031458Z		0145	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
+V	140805130449Z		0146	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test/emailAddress=test@oca.eu
+V	140805130620Z		0147	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805130815Z		0148	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805140452Z		0149	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805141133Z		014A	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu
+V	140805141222Z		014B	unknown	/C=fr/ST=alpes maritimes/O=oca/OU=ocan/CN=test webvpn/emailAddress=test.webvpn@oca.eu

WARNING : Modified: reseaux/vpn/var/www/html/openvpn/certificats/certs/openssl.cnf
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certs/openssl.cnf	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certs/openssl.cnf	2013-03-23 14:15:52 UTC (rev 5089)
@@ -133,7 +133,7 @@
         commonName_max			= 64
 
         emailAddress			= Adresse e mail
-        emailAddress_default		= test@oca.eu
+        emailAddress_default		= test.webvpn@oca.eu
         emailAddress_max		= 40
 
 # SET-ex3			= SET extension number 3

WARNING : Modified: reseaux/vpn/var/www/html/openvpn/certificats/certs/serial
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certs/serial	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certs/serial	2013-03-23 14:15:52 UTC (rev 5089)
@@ -1 +1 @@
-0146
+014D

WARNING : Modified: reseaux/vpn/var/www/html/openvpn/certificats/certs/serial.old
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certs/serial.old	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certs/serial.old	2013-03-23 14:15:52 UTC (rev 5089)
@@ -1 +1 @@
-0145
+014C

Modified: reseaux/vpn/var/www/html/openvpn/certificats/certsearch.php
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/certsearch.php	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/certificats/certsearch.php	2013-03-23 14:15:52 UTC (rev 5089)
@@ -11,25 +11,11 @@
 <?php
 
 	define("SLASH", stristr($_SERVER[SERVER_SOFTWARE], "win") ? "\\" : "/");
+	include('../config/firewall_functions.php');
 	
 	$path = '/etc/openvpn/easy-rsa/keys';
 	$q = $_POST['q'];
 	
-	function php_grep($q, $path){
-		
-		$fp = opendir($path);
-		while($f = readdir($fp)){
-			if( preg_match("#^\.+$#", $f) ) continue; // ignore symbolic links
-			$file_full_path = $path.SLASH.$f;
-			if(is_dir($file_full_path)) {
-				$ret .= php_grep($q, $file_full_path);
-			} else if( stristr(file_get_contents($file_full_path), $q) ) {
-				$ret .= "$file_full_path\n";
-			}
-		}
-		return $ret;
-	}
-
 	if($q){
 		$results = php_grep($q, $path);
 	}

Added: reseaux/vpn/var/www/html/openvpn/certificats/delete.php
===================================================================
--- reseaux/vpn/var/www/html/openvpn/certificats/delete.php	                        (rev 0)
+++ reseaux/vpn/var/www/html/openvpn/certificats/delete.php	2013-03-23 14:15:52 UTC (rev 5089)
@@ -0,0 +1,117 @@
+<html>
+<head>
+<title>OpenVPN Management Interface</title>
+</head>
+<body bgcolor=eeeeee>
+<a href="../index.html">retour accueil</a>
+<br>
+<h3>---| Suppression d'un utilisateur |---</h3>
+<br>
+<p>
+
+<?php
+
+	error_reporting(E_ERROR | E_WARNING | E_PARSE);
+	define("SLASH", stristr($_SERVER[SERVER_SOFTWARE], "win") ? "\\" : "/");
+	include('../config/firewall_functions.php');
+
+	$execute = $_POST['execute'];
+	$user = $_POST['user'];
+	$cmdFiles = $_POST['cmdFiles'];
+	$UDPNetwork = $_POST['UDPNetwork'];
+	$TCPNetwork = $_POST['TCPNetwork'];
+
+	if (!$execute) {
+
+		echo '<form method="post" action="delete.php">';
+		echo '<b>Qui voulez-vous supprimer ? </b>';
+		echo '<select name="user">';
+		constructList();
+		echo '</select><input type="hidden" name="execute" value=1>';
+		echo '<input type="submit" value="Envoyer"></form>';
+
+	}
+
+	elseif ($execute == 1) {
+
+		echo '<b>Attention ! Supprimer un utilisateur aura pour effet de :<br>';
+		echo '<dd>- supprimer d&eacute;finitivement le certificat et la cl&eacute;<br>';
+		echo '- supprimer les &eacute;ventuelles r&egrave;gles IPTABLES associ&eacute;es<br>';
+		echo '- supprimer la r&eacute;servation des adresses IP en TCP et UDP<br></dd>';
+		echo "<br>Confirmez-vous la suppression de $user ?".'<a href="../index.html"> (Retournez &agrave; l'."'".'accueil le cas &eacute;ch&eacute;ant)</a>';
+		echo '<form method="post" action="delete.php">';
+		echo '<input type="hidden" name="execute" value=2>';
+		echo '<input type="hidden" name="user" value="'.$user.'">';
+		echo '<input type="submit" value="Envoyer"></form>';
+
+	}
+
+	elseif ($execute == 2) {
+
+		$search = preg_replace('/_/', ' ', $user);
+		$dir = '/etc/openvpn/easy-rsa/keys';
+		$results = php_grep($search, $dir);
+		$result = explode("\n", $results);
+		$count = count($result);
+		$display = 0;
+		for ($i = 0; $i < $count; $i++) {
+			if (preg_match("/crt/",$result[$i])) {
+				$display = $result[$i];
+			}
+		}
+
+		if (!$display) {
+			echo '<b><font color=#FF0000>Il y a un probl&egrave;me. Aucun certificat associ&eacute; !</font></b>';
+		}
+		else {
+			echo '<b>Voici ce qui va &ecirc;tre ex&eacute;cut&eacute; : </b><br><br>';
+			$UDPNetwork = getUDPNetwork($user);
+			$TCPNetwork = getTCPNetwork($user);
+			list($rootdir,$dir1,$dir2,$dir3,$dir4,$certname) = preg_split('/\//', $display);
+			list($filesname,$extenstion) = preg_split('/\./', $certname);
+			$cmdFiles = 'sudo svn del '.$dir.'/'.$filesname.'.*';
+			echo $cmdFiles;
+			$userRules = getRules($UDPNetwork,$TCPNetwork);
+			$userRules = prepareToDelete($userRules);
+			$nbrRules = count($userRules);
+			echo '<br><br>Il y a '.$nbrRules.' r&egrave;gles !';
+			echo '<br><b>Exemple :</b> sudo /sbin/iptables '.$userRules[0];
+			echo '<br><br>Les lignes suivantes vont &ecirc;tre supprim&eacute;es : ';
+			echo '<br>'.$user.','.$UDPNetwork.' dans /etc/openvpn/ipp/ipp.txt';
+			echo '<br>'.$user.','.$TCPNetwork.' dans /etc/openvpn/ipp/ipp-tcp.txt';
+			echo "<br><br>Confirmez-vous la suppression de $user ?".'<a href="../index.html"> (Retournez &agrave; l'."'".'accueil le cas &eacute;ch&eacute;ant)</a>';
+			echo '<form method="post" action="delete.php">';
+			echo '<input type="hidden" name="execute" value=3>';
+			echo '<input type="hidden" name="user" value="'.$user.'">';
+			echo '<input type="hidden" name="cmdFiles" value="'.$cmdFiles.'">';
+			echo '<input type="hidden" name="UDPNetwork" value="'.$UDPNetwork.'">';
+			echo '<input type="hidden" name="TCPNetwork" value="'.$TCPNetwork.'">';
+			echo '<input type="submit" value="Envoyer"></form>';
+		}
+	}
+
+	elseif ($execute == 3) {
+
+		deleteUDPNetwork($UDPNetwork);
+		deleteTCPNetwork($TCPNetwork);
+		$userRules = getRules($UDPNetwork,$TCPNetwork);
+		$userRules = prepareToDelete($userRules);
+		$nbrRules = count($userRules);
+		$message = 'Suppression des acces VPN pour '.$user;
+		$cmdSVN = 'sudo svn commit /usr/local/svn/vpn/etc/openvpn/easy-rsa/keys/ -m '."'".$message."'";
+		$cmdIPP = 'sudo mv /tmp/ipp.tmp /etc/openvpn/ipp/ipp.txt && sudo mv /tmp/ipp-tcp.tmp /etc/openvpn/ipp/ipp-tcp.txt';
+		system($cmdIPP);
+		system($cmdFiles);
+		system($cmdSVN);
+		for ($i = 0; $i < $nbrRules; $i++) {
+			$cmdIPTABLES = 'sudo /sbin/iptables '.$userRules[$i];
+			system($cmdIPTABLES);
+		}
+		system('sudo /sbin/iptables-save > /etc/iptables.rules');
+		echo '<br><b>La suppression est effective !</b>';
+
+	}
+
+?>
+</body>
+</html>
\ No newline at end of file

WARNING : Modified: reseaux/vpn/var/www/html/openvpn/config/firewall.php
===================================================================
--- reseaux/vpn/var/www/html/openvpn/config/firewall.php	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/config/firewall.php	2013-03-23 14:15:52 UTC (rev 5089)
@@ -100,7 +100,7 @@
 				echo '-A FORWARD -s '.$UDPNetwork.'/30 -d '.$destination.$addPort.' -j '.$ruleType.'<br>';
 				echo '-A FORWARD -s '.$TCPNetwork.'/30 -d '.$destination.$addPort.' -j '.$ruleType.'<br>';
 			}
-			echo '<b>Confirmez-vous ces changements ? (<a href="../index.html">retournez &agrave; l'."'".'accueil le cas &eacute;ch&eacute;ant)</a></b><br>';
+			echo '<b>Confirmez-vous ces changements ? <a href="../index.html"> (Retournez &agrave; l'."'".'accueil le cas &eacute;ch&eacute;ant)</a></b><br>';
 			echo '<input type="hidden" name="action" value=1>';
 			echo '<input type="hidden" name="subaction" value=1>';
 			echo '<input type="hidden" name="execute" value=2>';
@@ -206,7 +206,7 @@
 			echo '<b>Voici les lignes qui vont &ecirc;tre suprim&eacute;es :</b><br>';
 			echo '-D FORWARD -s '.$UDPNetwork.'/30 -d '.$destination.$addPort.' -j '.$ruleType.'<br>';
 			echo '-D FORWARD -s '.$TCPNetwork.'/30 -d '.$destination.$addPort.' -j '.$ruleType.'<br>';
-			echo '<b>Confirmez-vous ces changements ? (<a href="../index.html">retournez &agrave; l'."'".'accueil le cas &eacute;ch&eacute;ant)</a></b><br>';
+			echo '<b>Confirmez-vous ces changements ? <a href="../index.html"> (Retournez &agrave; l'."'".'accueil le cas &eacute;ch&eacute;ant)</a></b><br>';
 			echo '<input type="hidden" name="action" value=2>';
 			echo '<input type="hidden" name="subaction" value=1>';
 			echo '<input type="hidden" name="execute" value=2>';

Modified: reseaux/vpn/var/www/html/openvpn/config/firewall_functions.php
===================================================================
--- reseaux/vpn/var/www/html/openvpn/config/firewall_functions.php	2013-03-23 14:14:40 UTC (rev 5088)
+++ reseaux/vpn/var/www/html/openvpn/config/firewall_functions.php	2013-03-23 14:15:52 UTC (rev 5089)
@@ -35,6 +35,7 @@
 		$ippStreamUDP = fopen($ippFileUDP, 'r');
 		$NoLippFileUDP = count(file($ippFileUDP));
 
+
 		while (!feof($ippStreamUDP)) {
 			$UDPLines[] = fgets($ippStreamUDP);
 		}
@@ -43,12 +44,14 @@
 			if (preg_match('/'.$user.'/', $UDPLines[$i])) {
 				list($VPNUser,$UDPNetwork) = preg_split('/,/', $UDPLines[$i]);
 				$UDPNetwork = trim($UDPNetwork);
+				return $UDPNetwork;
 			}
 			else {
 				$UDPNetwork = false;
 			}
 		}
 
+
 		fclose($ippStreamUDP);
 		return $UDPNetwork;
 
@@ -68,6 +71,7 @@
 			if (preg_match('/'.$user.'/', $TCPLines[$i])) {
 				list($VPNUser,$TCPNetwork) = preg_split('/,/', $TCPLines[$i]);
 				$TCPNetwork = trim($TCPNetwork);
+				return $TCPNetwork;
 			}
 			else {
 				$TCPNetwork = false;
@@ -94,8 +98,9 @@
 			$patternUDP = '/'.$UDPNetwork.'/';
 			$patternTCP = '/'.$TCPNetwork.'/';
 			if (preg_match($patternUDP, $rulesLines[$i]) || preg_match($patternTCP, $rulesLines[$i])) {
-				echo '<b>'.$nbrRules.' : </b>'.$rulesLines[$i+$j].'<br>';
+				echo '<b>'.$nbrRules.' : </b>'.$rulesLines[$i].'<br>';
 				$nbrRules++;
+				echo $rulesLines[$i].'<br>';
 			}
 		}
 
@@ -103,6 +108,97 @@
 
 	}
 
+	function getRules($UDPNetwork,$TCPNetwork) {
+
+		$rulesFile = '/etc/iptables.rules';
+		$rulesStream = fopen($rulesFile, 'r');
+		$NoLrulesFile = count(file($rulesFile));
+		$j = 0;
+			
+		while (!feof($rulesStream)) {
+			$rulesLines[] = fgets($rulesStream);
+		}
+
+		for ($i =0; $i < $NoLrulesFile; $i++) {
+			$patternUDP = '/'.$UDPNetwork.'/';
+			$patternTCP = '/'.$TCPNetwork.'/';
+			if (preg_match($patternUDP, $rulesLines[$i]) || preg_match($patternTCP, $rulesLines[$i])) {
+				$userRules[$j] = $rulesLines[$i];
+				$j++;
+			}
+		}
+
+		fclose($rulesStream);
+		return $userRules;
+
+	}
+
+	function deleteUDPNetwork($UDPNetwork) {
+
+		$ippFileUDP = '/etc/openvpn/ipp/ipp.txt';
+		$ippStreamUDP = fopen($ippFileUDP, 'r');
+		$NoLippFileUDP = count(file($ippFileUDP));
+		$ippTmpUDP = '/tmp/ipp.tmp';
+		$ippTmpStream = fopen($ippTmpUDP, 'w+');
+		$pattern = '/'.$UDPNetwork.'/';
+
+		while (!feof($ippStreamUDP)) {
+			$UDPLines[] = fgets($ippStreamUDP);
+		}
+
+		for ($i = 0; $i < $NoLippFileUDP; $i++) {
+			if (preg_match($pattern, $UDPLines[$i])) {
+				fwrite($ippTmpStream, '');
+			}
+			else {
+				fwrite($ippTmpStream, $UDPLines[$i]);
+			}
+		}
+
+		fclose($ippStreamUDP);
+		fclose($ippTmpStream);
+
+	}
+
+	function deleteTCPNetwork($TCPNetwork) {
+
+		$ippFileTCP = '/etc/openvpn/ipp/ipp-tcp.txt';
+		$ippStreamTCP = fopen($ippFileTCP, 'r');
+		$NoLippFileTCP = count(file($ippFileTCP));
+		$ippTmpTCP = '/tmp/ipp-tcp.tmp';
+		$ippTmpStream = fopen($ippTmpTCP, 'w+');
+		$pattern = '/'.$TCPNetwork.'/';
+
+		while (!feof($ippStreamTCP)) {
+			$TCPLines[] = fgets($ippStreamTCP);
+		}
+
+		for ($i = 0; $i < $NoLippFileTCP; $i++) {
+			if (preg_match($pattern, $TCPLines[$i])) {
+				fwrite($ippTmpStream, '');
+			}
+			else {
+				fwrite($ippTmpStream, $TCPLines[$i]);
+			}
+		}
+
+		fclose($ippStreamTCP);
+		fclose($ippTmpStream);
+
+	}
+
+	function prepareToDelete($userRules) {
+
+		$count = count($userRules);
+
+		for ($i = 0; $i < $count; $i++) {
+			$userRules[$i] = preg_replace('/\-A/', '-D', $userRules[$i]);
+		}
+
+		return $userRules;
+
+	}
+
 	function getFreeUDPNetwork() {
 
 		$ippFileUDP = '/etc/openvpn/ipp/ipp.txt';
@@ -216,4 +312,19 @@
 
 	}
 
+	function php_grep($q, $path){
+		
+		$fp = opendir($path);
+		while($f = readdir($fp)){
+			if( preg_match("#^\.+$#", $f) ) continue; // ignore symbolic links
+			$file_full_path = $path.SLASH.$f;
+			if(is_dir($file_full_path)) {
+				$ret .= php_grep($q, $file_full_path);
+			} else if( stristr(file_get_contents($file_full_path), $q) ) {
+				$ret .= "$file_full_path\n";
+			}
+		}
+		return $ret;
+	}
+
 ?>







